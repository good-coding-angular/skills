drop table if exists skillgruppe;
drop table if exists skill;
drop table if exists skillSkillgruppeNM;
drop table if exists mitarbeiter;
drop table if exists mitarbeiterSkillNM;
drop table if exists projekt;
drop table if exists mitarbeiterProjektSkillNM;
drop table if exists skillLearningSource;

create table skillgruppe (
  skillGruppeId int primary key auto_increment,
  name varchar(200) not null
);

create table skill (
  skillId int primary key auto_increment,
  name varchar(200) not null,
  description varchar(5000)
);

create table skillSkillgruppeNM (
  skillSkillgruppeId int primary key auto_increment,
  skillId int not null,
  skillgruppeId int not null
);

create table mitarbeiter (
  mitarbeiterId int primary key auto_increment,
  employeeId varchar(36),
  name varchar(200) not null,
  email varchar(200),
  available int not null
);

create table mitarbeiterSkillNM (
  mitarbetierSkillId int primary key auto_increment,
  skillId varchar(36) not null,
  mitarbeiterId int not null,
  level int not null
);

create table projekt (
  projektId int primary key auto_increment,
  projektname varchar(200) not null,
  projektende varchar(200)
);

create table mitarbeiterProjektSkillNM (
  mitarbeiterProjektSkillNMId int primary key auto_increment,
  mitarbeiterId int not null,
  projektId int not null,
  skillId int
);

create table skillLearningSource (
  skilllearningsourceId int primary key auto_increment,
  skillId int not null,
  sourceName varchar(200),
  url LONGTEXT
);

insert into skillgruppe (skillGruppeId, name) values (1, 'Frontend Developer');
insert into skillgruppe (skillGruppeId, name) values (2, '.NET Developer');
insert into skillgruppe (skillGruppeId, name) values (3, 'Java Developer');

insert into skill (skillId, name, description) values (1, 'Angular', '');
insert into skill (skillId, name, description) values (2, 'React', '');
insert into skill (skillId, name, description) values (3, '.NET', '');
insert into skill (skillId, name, description) values (4, 'Java', '');
insert into skill (skillId, name, description) values (5, 'Spring Boot', '');

insert into skillSkillgruppeNM (skillSkillgruppeId, skillId, skillgruppeId) values (1, 1, 1);
insert into skillSkillgruppeNM (skillSkillgruppeId, skillId, skillgruppeId) values (2, 2, 1);
insert into skillSkillgruppeNM (skillSkillgruppeId, skillId, skillgruppeId) values (3, 3, 2);
insert into skillSkillgruppeNM (skillSkillgruppeId, skillId, skillgruppeId) values (4, 4, 3);
insert into skillSkillgruppeNM (skillSkillgruppeId, skillId, skillgruppeId) values (5, 5, 3);

insert into mitarbeiter (mitarbeiterId, employeeId, name, email, available) values (1, '', 'Simon Sharp', 'simon.sharp@elca.ch', 1);
insert into mitarbeiter (mitarbeiterId, employeeId, name, email, available) values (2, '', 'Aram Yesildeniz', 'Aram.Yesildeniz@elca.ch', 1);

insert into mitarbeiterSkillNM (mitarbetierSkillId, skillId, mitarbeiterId, level) values (1, 1, 1, 4);
insert into mitarbeiterSkillNM (mitarbetierSkillId, skillId, mitarbeiterId, level) values (2, 2, 1, 1);
insert into mitarbeiterSkillNM (mitarbetierSkillId, skillId, mitarbeiterId, level) values (3, 3, 1, 3);
insert into mitarbeiterSkillNM (mitarbetierSkillId, skillId, mitarbeiterId, level) values (4, 4, 1, 2);
insert into mitarbeiterSkillNM (mitarbetierSkillId, skillId, mitarbeiterId, level) values (5, 5, 1, 2);
insert into mitarbeiterSkillNM (mitarbetierSkillId, skillId, mitarbeiterId, level) values (6, 1, 2, 4);
insert into mitarbeiterSkillNM (mitarbetierSkillId, skillId, mitarbeiterId, level) values (7, 2, 2, 4);
insert into mitarbeiterSkillNM (mitarbetierSkillId, skillId, mitarbeiterId, level) values (8, 3, 2, 1);
insert into mitarbeiterSkillNM (mitarbetierSkillId, skillId, mitarbeiterId, level) values (9, 4, 2, 4);
insert into mitarbeiterSkillNM (mitarbetierSkillId, skillId, mitarbeiterId, level) values (0, 5, 2, 4);

insert into projekt (projektId, projektname, projektende) values (1, 'Suva/Sumex', '2026-1-1');
insert into projekt (projektId, projektname, projektende) values (2, 'Postfinance', '2025-1-1');
insert into projekt (projektId, projektname, projektende) values (3, 'Kanton Basel Stadt', '2024-1-1');

insert into mitarbeiterProjektSkillNM (mitarbeiterProjektSkillNMId, mitarbeiterId, projektId, skillId) values (1, 1, 1, 1);
insert into mitarbeiterProjektSkillNM (mitarbeiterProjektSkillNMId, mitarbeiterId, projektId, skillId) values (2, 1, 2, 1);
insert into mitarbeiterProjektSkillNM (mitarbeiterProjektSkillNMId, mitarbeiterId, projektId, skillId) values (3, 1, 3, 1);

insert into skillLearningSource (skilllearningsourceId, skillId, sourceName, url) values (1, 1, 'Pluralsight', 'https://app.pluralsight.com/paths/skill/angular-development');

CREATE USER 'skillsroot'@'localhost';
GRANT ALL PRIVILEGES ON skills.* To 'skillsroot'@'localhost' IDENTIFIED BY 'skillsroot';
flush privileges;